service:
  host: "0.0.0.0"
  port_sentiment: 8001
  port_bayesian: 8002
  port_price_predictor: 8003
  port_signal_models: 8004
  workers: 1
  log_level: "info"

gpu:
  device: "cuda"
  mixed_precision: true
  compile: true  # torch.compile for faster inference

models:
  sentiment:
    model_name: "ProsusAI/finbert"
    max_length: 512
    batch_size: 32
    cache_dir: "./models/sentiment"
    quantize: false  # Set to true for INT8 quantization

  bayesian:
    prior_alpha: 1.0
    prior_beta: 1.0
    decay_factor: 0.95  # Exponential decay for older trades
    min_samples: 10  # Minimum trades before updating
    exploration_rate: 0.1  # Thompson sampling exploration

  price_predictor:
    model_name: "patchtst"
    context_length: 512  # Number of historical steps
    prediction_length: 12  # Predict next 12 time steps (15min * 12 = 3hrs)
    patch_size: 16
    num_layers: 3
    d_model: 128
    num_heads: 4
    dropout: 0.1
    lookback_hours: 168  # 1 week of history
    features: ["open", "high", "low", "close", "volume", "vwap"]
    cache_dir: "./models/price_predictor"

  signal_models:
    model_dir: "./models/signal_models"
    meta_model_threshold: 0.6  # P(profitable) threshold for EXECUTE
    min_training_samples: 100
    retrain_interval_days: 7

database:
  path: "../portfolio.db"

inference:
  max_batch_size: 32
  timeout_seconds: 5
  cache_predictions: true
  cache_ttl_seconds: 60

training:
  sentiment:
    learning_rate: 2.0e-5
    epochs: 3
    warmup_steps: 500
    weight_decay: 0.01

  price_predictor:
    learning_rate: 1.0e-4
    epochs: 50
    batch_size: 64
    early_stopping_patience: 5
    validation_split: 0.2

monitoring:
  enable_prometheus: true
  log_predictions: true
  track_latency: true
